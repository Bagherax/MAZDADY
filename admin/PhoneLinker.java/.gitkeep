package mazdady.admin;

/**
 * مدير ربط أرقام الهواتف مع دعم التحقق
 */
public final class PhoneLinker {
    private static final PhoneLinker INSTANCE = new PhoneLinker();

    private PhoneLinker() {}

    public static PhoneLinker getInstance() {
        return INSTANCE;
    }

    public void linkPhoneNumberToUser(String userId, String phoneNumber) {
        if (!isValidPhoneNumber(phoneNumber)) {
            throw new IllegalArgumentException("Invalid phone number format");
        }
        System.out.println("PHONE LINKED: " + phoneNumber + " linked to user " + userId);
    }

    public void unlinkPhoneNumber(String userId) {
        System.out.println("PHONE UNLINKED: Phone number unlinked from user " + userId);
    }

    public boolean isPhoneLinked(String phoneNumber) {
        // في الإنتاج: التحقق من قاعدة البيانات
        return true;
    }

    private boolean isValidPhoneNumber(String phoneNumber) {
        return phoneNumber.matches("^\\+?[1-9]\\d{1,14}$");
    }
}