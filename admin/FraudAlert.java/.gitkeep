package mazdady.admin;

import mazdady.user.User;

import java.time.Instant;
import java.util.concurrent.CompletableFuture;

/**
 * Ù†Ø¸Ø§Ù… ØªÙ†Ø¨ÙŠÙ‡Ø§Øª Ø§Ù„Ø§Ø­ØªÙŠØ§Ù„ Ù…Ø¹ Ø¯Ø¹Ù… Ø§Ù„ÙƒØ´Ù Ø§Ù„ØªÙ„Ù‚Ø§Ø¦ÙŠ
 * ÙŠØªØ¨Ø¹ Ù†Ù…Ø· Observer Ù„Ø¥Ø¹Ù„Ø§Ù… ÙØ±ÙŠÙ‚ Ø§Ù„Ø£Ù…Ù†
 */
public final class FraudAlert {
    private static final FraudAlert INSTANCE = new FraudAlert();

    private FraudAlert() {}

    public static FraudAlert getInstance() {
        return INSTANCE;
    }

    public CompletableFuture<Void> triggerFraudAlertAsync(String userId, String reason) {
        return CompletableFuture.runAsync(() -> {
            System.out.println("ğŸš¨ FRAUD ALERT: " + reason + " for user " + userId + " at " + Instant.now());
            investigateUser(userId);
        });
    }

    private void investigateUser(String userId) {
        // ÙÙŠ Ø§Ù„Ø¥Ù†ØªØ§Ø¬: Ø¨Ø¯Ø¡ Ø¹Ù…Ù„ÙŠØ© Ø§Ù„ØªØ­Ù‚ÙŠÙ‚ Ø§Ù„ØªÙ„Ù‚Ø§Ø¦ÙŠØ©
        System.out.println("INVESTIGATING: User " + userId + " under fraud investigation");
    }

    public void banUserForFraud(String userId) {
        AccountFreezer.getInstance().freezeAccountAsync(userId, "Fraud detected");
        System.out.println("BANNED: User " + userId + " banned for fraud");
    }
}