package mazdady.dev;

import java.util.Map;
import java.util.concurrent.ConcurrentHashMap;

/**
 * Ø¯Ù„ÙŠÙ„ Ø§Ù„Ø¹Ù…Ø§Ø±Ø© Ù…Ø¹ Ø¯Ø¹Ù… Ø§Ù„ØªÙˆØ«ÙŠÙ‚ Ø§Ù„Ø¯ÙŠÙ†Ø§Ù…ÙŠÙƒÙŠ
 * ÙŠØªØ¨Ø¹ Ù†Ù…Ø· Singleton Ù„ØªÙˆÙÙŠØ± Ù…Ø±Ø¬Ø¹ Ù…ÙˆØ­Ø¯
 */
public final class ArchGuide {
    private final Map<String, ArchitectureComponent> components = new ConcurrentHashMap<>();
    private static final ArchGuide INSTANCE = new ArchGuide();

    private ArchGuide() {
        initializeArchitecture();
    }

    public static ArchGuide getInstance() {
        return INSTANCE;
    }

    private void initializeArchitecture() {
        // ØªØ¹Ø±ÙŠÙ Ù…ÙƒÙˆÙ†Ø§Øª Ø§Ù„Ø¹Ù…Ø§Ø±Ø©
        components.put("CORE", new ArchitectureComponent(
            "Core Layer",
            "Ø§Ù„Ø·Ø¨Ù‚Ø© Ø§Ù„Ø£Ø³Ø§Ø³ÙŠØ© Ø§Ù„ØªÙŠ ØªØ­ØªÙˆÙŠ Ø¹Ù„Ù‰ Ù†Ù‚Ø§Ø· Ø§Ù„Ø¯Ø®ÙˆÙ„ ÙˆØ§Ù„ØªÙ‡ÙŠØ¦Ø©",
            "core/"
        ));
        components.put("USER", new ArchitectureComponent(
            "User Layer",
            "Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ†ØŒ Ø§Ù„Ù…Ø³ØªÙˆÙŠØ§ØªØŒ ÙˆØ§Ù„Ø§Ø´ØªØ±Ø§ÙƒØ§Øª",
            "user/"
        ));
        components.put("WALLET", new ArchitectureComponent(
            "Wallet Layer",
            "Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…Ø­ÙØ¸Ø© Ø§Ù„Ø±Ù‚Ù…ÙŠØ© ÙˆØ§Ù„Ù…Ø¹Ø§Ù…Ù„Ø§Øª",
            "wallet/"
        ));
        components.put("TRADING", new ArchitectureComponent(
            "Trading Layer",
            "Ù…Ø­Ø±Ùƒ Ø§Ù„ØªØ¯Ø§ÙˆÙ„ ÙˆÙØ±Ù‚ Ø§Ù„ØªØ¯Ø§ÙˆÙ„ Ø§Ù„Ø°ÙƒÙŠØ©",
            "trading/, team/"
        ));
        components.put("ADMIN", new ArchitectureComponent(
            "Admin Layer",
            "Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ… Ø§Ù„Ø¥Ø¯Ø§Ø±ÙŠØ© Ø§Ù„ÙƒØ§Ù…Ù„Ø©",
            "admin/"
        ));
        components.put("SECURITY", new ArchitectureComponent(
            "Security Layer",
            "Ø§Ù„Ø£Ù…Ø§Ù† Ø§Ù„Ù…ØªÙ‚Ø¯Ù… ÙˆØ§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„Ù‡ÙˆÙŠØ©",
            "security/, auth/"
        ));
    }

    /**
     * Ø§Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ ÙˆØµÙ Ù…ÙƒÙˆÙ† Ø§Ù„Ø¹Ù…Ø§Ø±Ø©
     */
    public String getComponentDescription(String componentName) {
        ArchitectureComponent component = components.get(componentName);
        return component != null ? component.getDescription() : "Component not found";
    }

    /**
     * Ø§Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ Ù…Ø³Ø§Ø± Ù…ÙƒÙˆÙ† Ø§Ù„Ø¹Ù…Ø§Ø±Ø©
     */
    public String getComponentPath(String componentName) {
        ArchitectureComponent component = components.get(componentName);
        return component != null ? component.getPath() : "unknown/";
    }

    /**
     * Ø¹Ø±Ø¶ Ø¯Ù„ÙŠÙ„ Ø§Ù„Ø¹Ù…Ø§Ø±Ø© Ø§Ù„ÙƒØ§Ù…Ù„
     */
    public String getFullGuide() {
        StringBuilder guide = new StringBuilder();
        guide.append("ğŸ—ï¸ MAZDADY ARCHITECTURE GUIDE\n");
        guide.append("================================\n\n");
        
        for (Map.Entry<String, ArchitectureComponent> entry : components.entrySet()) {
            ArchitectureComponent component = entry.getValue();
            guide.append(String.format(
                "ğŸ”· %s\n" +
                "   Ø§Ù„ÙˆØµÙ: %s\n" +
                "   Ø§Ù„Ù…Ø³Ø§Ø±: %s\n\n",
                component.getName(),
                component.getDescription(),
                component.getPath()
            ));
        }
        
        return guide.toString();
    }

    /**
     * Ù…ÙƒÙˆÙ† Ø§Ù„Ø¹Ù…Ø§Ø±Ø©
     */
    private static final class ArchitectureComponent {
        private final String name;
        private final String description;
        private final String path;

        public ArchitectureComponent(String name, String description, String path) {
            this.name = name;
            this.description = description;
            this.path = path;
        }

        public String getName() { return name; }
        public String getDescription() { return description; }
        public String getPath() { return path; }
    }
}