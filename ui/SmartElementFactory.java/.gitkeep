package mazdady.ui;

import android.content.Context;
import android.view.View;
import android.widget.Button;
import android.widget.ImageView;
import android.widget.TextView;

import java.util.function.Supplier;

/**
 * مصنع عناصر ذكية مع دعم الإنشاء الديناميكي
 * يتبع نمط Factory لإنشاء عناصر مختلفة
 */
public final class SmartElementFactory {
    private static SmartElementFactory instance;

    private SmartElementFactory() {}

    public static synchronized SmartElementFactory getInstance() {
        if (instance == null) {
            instance = new SmartElementFactory();
        }
        return instance;
    }

    /**
     * إنشاء عنصر ذكي من نوع زر
     */
    public SmartElement createButton(Context context, String text, Supplier<View> onClickAction) {
        Button button = new Button(context);
        button.setText(text);
        button.setOnClickListener(v -> {
            if (onClickAction != null) {
                onClickAction.get();
            }
        });
        
        return new SmartElement(context, null, element -> {
            // في الإنتاج: تفعيل وضع التعديل
            System.out.println("SMART ELEMENT FACTORY: Created button with text " + text);
        });
    }

    /**
     * إنشاء عنصر ذكي من نوع صورة
     */
    public SmartElement createImageView(Context context, int imageResourceId) {
        ImageView imageView = new ImageView(context);
        imageView.setImageResource(imageResourceId);
        
        return new SmartElement(context, null, element -> {
            // في الإنتاج: تفعيل وضع التعديل
            System.out.println("SMART ELEMENT FACTORY: Created image view with resource " + imageResourceId);
        });
    }

    /**
     * إنشاء عنصر ذكي من نوع نص
     */
    public SmartElement createTextView(Context context, String text) {
        TextView textView = new TextView(context);
        textView.setText(text);
        
        return new SmartElement(context, null, element -> {
            // في الإنتاج: تفعيل وضع التعديل
            System.out.println("SMART ELEMENT FACTORY: Created text view with text " + text);
        });
    }

    /**
     * إنشاء عنصر ذكي من نوع خط التداول
     */
    public SmartElement createTradingLine(Context context) {
        TradingLineBotManager tradingLine = new TradingLineBotManager(context, null);
        
        return new SmartElement(context, null, element -> {
            // في الإنتاج: تفعيل وضع التعديل
            System.out.println("SMART ELEMENT FACTORY: Created trading line");
        });
    }

    /**
     * إنشاء عنصر ذكي من نوع محفظة
     */
    public SmartElement createWalletView(Context context) {
        WalletView walletView = new WalletView(context);
        
        return new SmartElement(context, null, element -> {
            // في الإنتاج: تفعيل وضع التعديل
            System.out.println("SMART ELEMENT FACTORY: Created wallet view");
        });
    }

    /**
     * إنشاء عنصر ذكي من نوع إعلان
     */
    public SmartElement createAdBanner(Context context) {
        AdBannerView adBanner = new AdBannerView(context);
        
        return new SmartElement(context, null, element -> {
            // في الإنتاج: تفعيل وضع التعديل
            System.out.println("SMART ELEMENT FACTORY: Created ad banner");
        });
    }

    /**
     * إنشاء عنصر ذكي من نوع زر شراء
     */
    public SmartElement createBuyButton(Context context) {
        BuySellButton buyButton = new BuySellButton(context, "شراء");
        
        return new SmartElement(context, null, element -> {
            // في الإنتاج: تفعيل وضع التعديل
            System.out.println("SMART ELEMENT FACTORY: Created buy button");
        });
    }

    /**
     * إنشاء عنصر ذكي من نوع زر بيع
     */
    public SmartElement createSellButton(Context context) {
        BuySellButton sellButton = new BuySellButton(context, "بيع");
        
        return new SmartElement(context, null, element -> {
            // في الإنتاج: تفعيل وضع التعديل
            System.out.println("SMART ELEMENT FACTORY: Created sell button");
        });
    }

    /**
     * زر شراء/بيع
     */
    private static final class BuySellButton extends Button {
        public BuySellButton(Context context, String text) {
            super(context);
            setText(text);
            setTextColor(Color.WHITE);
            setBackgroundResource(android.R.drawable.btn_default);
        }
    }

    /**
     * عرض المحفظة
     */
    private static final class WalletView extends TextView {
        public WalletView(Context context) {
            super(context);
            setText("$9891.26");
            setTextSize(24);
            setTextColor(Color.WHITE);
            setPadding(20, 20, 20, 20);
        }
    }

    /**
     * عرض الإعلان
     */
    private static final class AdBannerView extends TextView {
        public AdBannerView(Context context) {
            super(context);
            setText("مشاهدة إعلانات");
            setTextSize(18);
            setTextColor(Color.WHITE);
            setBackgroundResource(android.R.drawable.btn_default);
            setPadding(20, 20, 20, 20);
        }
    }
}