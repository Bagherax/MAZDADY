package mazdady.ui;

import android.widget.TextView;
import android.graphics.Color;

public class PriceTickerView {
    private TextView priceView;
    private double lastPrice = 100.0;

    public PriceTickerView(TextView priceView) {
        this.priceView = priceView;
    }

    public void updatePrice(double newPrice) {
        double change = ((newPrice - lastPrice) / lastPrice) * 100;
        String symbol = change >= 0 ? "ðŸ”º" : "ðŸ”»";
        String formattedChange = String.format("%.2f", Math.abs(change));
        String display = symbol + " " + formattedChange + "%";

        int color = change >= 0 ? Color.parseColor("#4CAF50") : Color.parseColor("#F44336");
        priceView.setTextColor(color);
        priceView.setText(display);

        if (Math.abs(change) > 5.0) {
            animatePulse();
        }

        lastPrice = newPrice;
    }

    private void animatePulse() {
        priceView.animate().scaleX(1.1f).scaleY(1.1f).setDuration(100)
                .withEndAction(() -> priceView.animate().scaleX(1.0f).scaleY(1.0f).setDuration(100));
    }
}